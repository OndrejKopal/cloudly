{% extends "base.html" %}

{% load humanize %}
{% load cloud_extras %}
						
{% block title %}User {{u|title}} Report{% endblock %}

{% block extra_css%}
{% endblock %}

{% block extra_js %}
<script>
</script>
{% endblock %}

{% block page_content %}


<div class="col-md-10 col-sm-11 main ">

	<ol class="breadcrumb">
	  	<li><a href="/admin/">Admin</a></li>
	  	<li class="active"></li> Report for user <b>"{{user_profile.name}}"</b>
	</ol>
	
	<div class="row">
		<div class="col-xs-12">
			<div class="panel panel-default">
					<div class="panel-heading">
						<h2><i class="fa fa-picture-o"></i>Virtual Machines</h2>
						<div class="panel-actions">
							<a href="#" class="btn-setting"><i class="fa fa-wrench"></i></a>
							<a href="#" class="btn-minimize"><i class="fa fa-chevron-up"></i></a>
							<a href="#" class="btn-close"><i class="fa fa-times"></i></a>
						</div>
					</div>
					<div class="panel-body">
						<table class="table table-bordered">
						  <thead>
							  <tr>
								  <th>id</th>
								  <th>state</th>
								  <th>instance_type</th>
								  <th>name</th>
								  <th>public_dns_name</th>
								  <th>_placement</th>
								  <th>region</th>
								  <th>ip_address</th>
								  <th>key_name</th>
								  <th>launch_time</th>
								  <th>virtualization_type</th>
								  <th>architecture</th>
								  <th>hypervisor</th>
							  </tr>
						  </thead>   
						  <tbody>
							{% for i in vms_cached_response %}
							<tr>
								<td>{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"id"}}</td>
								<td>{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"_state"}}</td>
								<td>{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"instance_type"}}</td>
								<td>{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"tags"|dict_get:"Name"}}</td>
								<td>
									{% if vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"public_dns_name" %}
									<a href="http://{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"public_dns_name"}}" target="_blank"><font size=1>{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"public_dns_name"}}</a></font>
									{% else %}
									-
									{% endif %}
								</td>
								<td>{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"_placement"}}</td>
								<td>{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"region"}}</td>
								<td>
									{% if vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"ip_address" %}
									{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"ip_address"}}
									{% else %}
									-
									{% endif %}
								</td>
								<td>{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"key_name"}}</td>
								<td>{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"launch_time"}}</td>
								<td>{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"virtualization_type"}}</td>
								<td>{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"architecture"}}</td>
								<td>{{vms_cached_response|dict_get:i|dict_get:"instance"|dict_get:"hypervisor"}}</td>
							</tr>
							{% endfor %}
						  </tbody>
					 </table>
					debug: {{vms_cached_response}}	
					</div>
			</div>
		</div>

		<div class="col-xs-12">
			<div class="panel panel-default">
					<div class="panel-heading">
						<h2><i class="fa fa-picture-o"></i>Private Servers</h2>
						<div class="panel-actions">
							<a href="#" class="btn-setting"><i class="fa fa-wrench"></i></a>
							<a href="#" class="btn-minimize"><i class="fa fa-chevron-up"></i></a>
							<a href="#" class="btn-close"><i class="fa fa-times"></i></a>
						</div>
					</div>
					<div class="panel-body">
						<table class="table table-bordered">
						  <thead>
							  <tr>
								  <th>tbd</th>
								  <th>tbd</th>
								  <th>tbd</th>
								  <th>tbd</th>                                          
								  <th>tbd</th>
							  </tr>
						  </thead>   
						  <tbody>
							{% comment %}
							<tr>
								<td></td>
								<td></td>
								<td></td>
								<td></td>
								<td></td>
							</tr>
							{% endcomment %}
						  </tbody>
					 </table>
					</div>
			</div>
		</div>
	
	
		<div class="col-xs-4">
			<div class="panel panel-default">
					<div class="panel-heading">
						<h2><i class="fa fa-picture-o"></i>Activity (clicked)</h2>
						<div class="panel-actions">
							<a href="#" class="btn-setting"><i class="fa fa-wrench"></i></a>
							<a href="#" class="btn-minimize"><i class="fa fa-chevron-up"></i></a>
							<a href="#" class="btn-close"><i class="fa fa-times"></i></a>
						</div>
					</div>
					<div class="panel-body">
						
						
						<table class="table table-bordered">
						  <thead>
							  <tr>
								  <th>IP Address</th>
								  <th>When</th>
								  <th>Link</th>
							  </tr>
						  </thead>   
						  <tbody>
							{% for a in user_activity_clicks %} 
							<tr>
								<td><font size=1><a href="http://www.infosniper.net/index.php?ip_address={{a.ip_addr}}&map_source=1&overview_map=1&lang=1&map_type=1&zoom_level=7" target="_blank">{{a.ip_addr}}</a></font></td>
								<td><font size=2>{{a.date_created|naturaltime}}</font></td>
								<td><a href="{{a.link}}">{{a.link}}</a></td>
							</tr>
							{% endfor %}
						  </tbody>
					 </table>
						

					</div>
			</div>
		</div>

		<div class="col-xs-8">
			<div class="panel panel-default">
					<div class="panel-heading">
						<h2><i class="fa fa-picture-o"></i>Activity (other)</h2>
						<div class="panel-actions">
							<a href="#" class="btn-setting"><i class="fa fa-wrench"></i></a>
							<a href="#" class="btn-minimize"><i class="fa fa-chevron-up"></i></a>
							<a href="#" class="btn-close"><i class="fa fa-times"></i></a>
						</div>
					</div>
					<div class="panel-body">
						<table class="table table-bordered">
						  <thead>
							  <tr>
								  <th>Date</th>
								  <th>Activity</th>
								  <th>Meta</th>
								  <th>Function</th>                                          
								  <th>Link</th>
							  </tr>
						  </thead>   
						  <tbody>
							{% for a in user_activity_other %}
							<tr>
								<td><font size=2>{{a.date_created}}</font></td>
								<td>{{a.activity}}<td>
								<td>{{a.meta}}</td>
								<td>{{a.function}}</td>                                       
								<td>{{a.link}}</td>
							</tr>
							{% endfor %}
						  </tbody>
					 </table>
					</div>
			</div>
		</div>

		<div class="col-xs-8">
			<div class="panel panel-default">
					<div class="panel-heading">
						<h2><i class="fa fa-picture-o"></i>Files</h2>
						<div class="panel-actions">
							<a href="#" class="btn-setting"><i class="fa fa-wrench"></i></a>
							<a href="#" class="btn-minimize"><i class="fa fa-chevron-up"></i></a>
							<a href="#" class="btn-close"><i class="fa fa-times"></i></a>
						</div>
					</div>
					<div class="panel-body">
						<table class="table table-bordered">
						  <thead>
							  <tr>
								  <th>Date created</th>
								  <th>Size</th>
								  <th>Filename</th>
								  <th>Type</th>                                          
							  </tr>
						  </thead>   
						  <tbody>
							{% for f in user_files %}
							<tr>
								<td><font size=2>{{f.date_created}}</font></td>
								<td>{{f.size|filesizeformat}}</td>
								<td>{{f.file.file|clear_filename}}</td>
								<td>
									<span class="label label-success">{{f.file_type|upper}}</span>
								</td>                                       
							</tr>
							{% endfor %}
						  </tbody>
					 </table>
					</div>
			</div>
		</div>





	</div>
	
</div>




{% endblock page_content %}

