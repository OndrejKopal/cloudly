{% extends "base.html" %}

{% load cloud_extras %}
						
{% block title %}Cloud Storage{% endblock %}

{% block page_content %}
 
<div class="col-md-10 col-sm-11 main ">
		<div class="row">
				<div class="col-lg-12">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h2><i class="fa fa-edit"></i>Dropzone.js</h2>
							<div class="panel-actions">
								<a href="form-dropzone.html#" class="btn-setting"><i class="fa fa-wrench"></i></a>
								<a href="form-dropzone.html#" class="btn-minimize"><i class="fa fa-chevron-up"></i></a>
								<a href="form-dropzone.html#" class="btn-close"><i class="fa fa-times"></i></a>
							</div>
						</div>
						<div class="panel-body">
							
							<div class="alert alert-info">
								<button type="button" class="close" data-dismiss="alert">Ã—</button>
								Drag &amp; drop file upload with image preview
							</div>
								  
							<div class="form-group">
								<label class="control-label">File Upload</label>
								<div class="controls">
								  	<div id="dropzone">
										<form action="test.html" class="dropzone dz-clickable">
											
										<div class="dz-default dz-message"><span>Drop files here to upload</span></div></form>
									</div>
								</div>
							</div>	  

						</div>
					</div>
				</div><!--/col-->
			</div>
</div>


		<div class="col-md-10 col-sm-11 main ">
			<div class="row">
				<div class="col-xs-12">
					<div class="panel panel-default">
							<div class="panel-heading">
								<h2><i class="fa fa-picture-o"></i>Hello World</h2>
								<div class="panel-actions">
									<a href="#" class="btn-setting"><i class="fa fa-wrench"></i></a>
									<a href="#" class="btn-minimize"><i class="fa fa-chevron-up"></i></a>
									<a href="#" class="btn-close"><i class="fa fa-times"></i></a>
								</div>
							</div>
							<div class="panel-body">
						        <!-- IMPORTANT enctype attribute! -->
						        <form class="dropzone" action="/cloud/storage/" method="post" enctype="multipart/form-data">
						            {% csrf_token %}
						        </form>

								{% comment %}
						        <button id="submit-all">
						            Submit all files
						        </button>
								{% endcomment %}


								<br/>
								Your files in the cloud:<br/>
								{% for f in uploaded_files %}
									{{f.file.file}}<br/>
								{% endfor %}

								<br/>
								XXX cloud_uploader.py
		 					</div><!--/col-->
					</div><!--/row-->	
				</div>
				<!-- end: Content -->
			</div><!--/row-->		
		</div><!--/container-->


        <script src="/static/js/dropzone.js"></script>
        <script type="text/javascript">
            Dropzone.options.myDropzone = {
 
                // Prevents Dropzone from uploading dropped files immediately
                autoProcessQueue : false,
 
                init : function() {
                    var submitButton = document.querySelector("#submit-all")
                    myDropzone = this;
 
                    submitButton.addEventListener("click", function() {
                        myDropzone.processQueue();
                        // Tell Dropzone to process all queued files.
                    });
 
                    // You might want to show the submit button only when
                    // files are dropped here:
                    this.on("addedfile", function() {
                        // Show submit button here and/or inform user to click it.
                    });
 
                }
            };
        </script>

{% endblock page_content %}

